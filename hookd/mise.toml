[env]
_.file = ".env"

[tools]
rust = "1.85"

[tasks.install]
description = "Install hookd binary"
run = "cargo install --path ."

[tasks.build]
description = "Build hookd in release mode"
run = "cargo build --release"

[tasks.start]
description = "Start hookd daemon"
run = "cargo run --release"

[tasks.dev]
description = "Run hookd in dev mode"
run = "cargo run"

[tasks.test]
description = "Run hookd tests"
run = "cargo test"

[tasks.lint]
description = "Run clippy checks"
run = "cargo clippy -- -D warnings"

[tasks.fmt]
description = "Format rust sources"
run = "cargo fmt --all"

[tasks.clean]
description = "Clean build artifacts"
run = "cargo clean"

[tasks."context:bootstrap"]
description = "Bootstrap hookd dev context"
run = [
  "echo 'hookd context bootstrap'",
  "cargo fetch"
]
